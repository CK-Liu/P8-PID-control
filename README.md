# CarND-Controls-PID
Self-Driving Car Engineer Nanodegree Program

---

## PID controller introduction

The simulator will feed us with cross track error (cte), speed and orientation of the car. I am not going to control the speed of the car. Only using the cte to control the steering of the car to follow the road. 

The path generated by this method is not so smooth considering we do not utilize the previous orientation of the car. It feels like the lateral acceleration is high and it is not comfortable to ride in this car. If we want a smoother ride, it will be helpful if we are considering both the previous orientation and the current PID output. We may apply a more complex control method to make their differences are in a certain range.

We are considering the throttle value is a constant value 0.3. But in reality, a constant throttle value is not a guarantee for a constant speed. If we want a constant speed in the real world, a speed control method also needs to be implemented. But for this project, we only use PID controller to control the steering angle of the car.

The P stands for 'proportional'. P component has the most observable effect in controlling the car following the road. When we received a cte value, it indicates how far away the car with the center line of the road. If we want to return to the center, we just steer to the opposite direction. How much we steer our vehicle is depended on the P value and how far away we are off the road. If we have a bigger P value, we can return to the center more quickly. But it will generate some ossillation.

The D stands for 'differential'. D componet is used to alleviate P component's tendency to overshoot and ossillation. By choosing a proper D parameter, the car is able to approch the center line more smoothly. 

The I is the 'integral' component. It is very important if we want our car reach and keep on the center line. The self-driving car is not a perfect system, it usually will has some steering drift. By adding I component, the little steering drift will be added from the beginning of the control. So even little drift will generate a big enough value with time passing by. In this way, the car can be controlled to follow the center line.

## Steps to maunal tune a PID controller

Manual tuning PID is really time consuming and needs to have a better understanding about how adjusting P, I, D components will influence the final output. Altough we can use twiddle or SGD to help us automatically tune the parameters, it is still essential to have experiences about manual tuning a PID controller. Most of the PID control applications, such as voltage or current control, if the parameters are not choosen properly, it may cause disasters when we try it on our prototype. The working principle of Twiddle is to try every combination of the parameters, it works pretty well if we can have an accurate model and a good simulator. But in most of the cases, the simulator and model are only an approximate to the real world. The ideal parameters worked for a simulator usually not work when applied to a prototype. Here are the manual steps to tune a PID controller:

1. Set all the gains to zero.
2. Increasing the P component until the response is steady oscillation.
3. Increasing the D component until the oscillation is go away.
4. Repeat steps 2 and 3 until increasing the D component does not stop the oscillation.
5. Set P and D to the last stable values.
6. Increase the integral component until it bring you to the setpoint with the allowed oscillations.

By following these steps to manual tuning the parameters, we settled on Kp = 0.145, Ki = 0.004, Kd = 6.3.







